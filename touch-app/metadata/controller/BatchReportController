{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "models": [
            "Batch",
            "BatchReportPanel"
        ],
        "stores": [
            "BatchStore",
            "BatchFormStore",
            "BatchReportPanelStore"
        ],
        "views": [
            "BatchReportCarousel"
        ],
        "designer|userClassName": "BatchReportController"
    },
    "designerId": "946d268d-9ef8-4b31-8ae9-6b6b32617ea8",
    "cn": [
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "init",
                "designer|params": [
                    "application"
                ],
                "implHandler": [
                    "",
                    "this.control({",
                    "    '#selectBatchBackToolbar button[itemId=commonBackBtn]':{",
                    "        tap:function(btn, e, eOpts){",
                    "            history.go(0);",
                    "        }",
                    "    },",
                    "    'batchreportcarousel searchfield[itemId=commonSearchField]':{",
                    "        action:this.doSearchBatchForm",
                    "    }",
                    "});"
                ]
            },
            "designerId": "1d1a4040-b7b9-4934-a0cb-a2588e1c8905"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "batchReportCarousel",
                "selector": "batchreportcarousel"
            },
            "designerId": "2bdb0665-7ce0-496e-a893-9aa9d0582c90"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doSearchBatchForm",
                "designer|params": [
                    "field, e, eOpts"
                ],
                "implHandler": [
                    "var that=this;",
                    "Ext.getStore('BatchFormStore').load({",
                    "    params:{",
                    "        id:field.getValue()",
                    "    },",
                    "    callback:function(records, operation, success){",
                    "        that.getBatchReportCarousel().down('formpanel[itemId=batchForm]').setRecord(records[0]);",
                    "        that.showBatchReport(field.getValue());",
                    "    }",
                    "",
                    "});",
                    "",
                    "/*",
                    "batchid=this.getBatchReportCarousel().down('searchfield[itemId=commonSearchField]').getValue();",
                    "",
                    "var that=this;",
                    "",
                    "Ext.Ajax.request({",
                    "url:'/rest/batch/'+batchid,",
                    "method :'GET',",
                    "callback:function(callback,success,data){",
                    "var batchdata=Ext.decode(data.responseText).batchInstanceList;",
                    "console.log(batchdata);",
                    "that.getBatchReportCarousel().down('textfield[itemId=batchid]').setValue(batchdata.id);",
                    "that.getBatchReportCarousel().down('textfield[itemId=batchitem]').setValue(batchdata.item.id);",
                    "that.getBatchReportCarousel().down('textfield[itemId=batchname]').setValue(batchdata.name);",
                    "that.getBatchReportCarousel().down('textfield[itemId=batchexpectQty]').setValue(batchdata.expectQty);",
                    "that.showBatchReport(batchid);",
                    "}",
                    "});",
                    "",
                    "*/",
                    ""
                ]
            },
            "designerId": "2cf944a0-dbe2-4966-a212-d1ccb56b4f19"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "showBatchReport",
                "designer|params": [
                    "batchid"
                ],
                "implHandler": [
                    "console.log('BatchReportCarouselController-showBatchReport');",
                    "",
                    "",
                    "var store=Ext.getStore('BatchReportPanelStore');",
                    "",
                    "var that=this;",
                    "",
                    "console.log(store);",
                    "",
                    "store.load({",
                    "    params:{",
                    "        'batch.id':batchid",
                    "    },",
                    "    callback:function(records, operation, success){",
                    "        console.log(records);",
                    "/*",
                    "        that.getBatchParamsCarousel().remove(that.getBatchParamsCarousel().down('panel[itemId=batchRouteParamsPanel]'),true);",
                    "",
                    "        that.getBatchParamsCarousel().add({xtype:'batchrouteparamspanel'});",
                    "        var form=that.getBatchParamsCarousel().down('formpanel[itemId=batchRouteParamsForm]');",
                    "",
                    "        store.each(function(item, index, length){",
                    "",
                    "            var field=null;",
                    "",
                    "            switch(item.data['reportParams__param__paramType']){",
                    "                case \"INTEGER\":",
                    "                field={",
                    "                    xtype: 'numberfield'",
                    "                };",
                    "                break;",
                    "                case \"STRING\":",
                    "                field={",
                    "                    xtype: 'textfield'",
                    "                };",
                    "                break;",
                    "                case \"BOOLEAN\":",
                    "                field={",
                    "                    xtype: 'textfield'",
                    "                };",
                    "                break;",
                    "                case \"LIST\":",
                    "                //field={",
                    "                //    xtype: 'triggerfield'",
                    "                //};",
                    "                break;",
                    "                default:",
                    "                console.log('error: not defined paramType');",
                    "                break;",
                    "            }",
                    "",
                    "            field.flex=1;",
                    "            field.label= item.data['reportParams__param__title'];",
                    "            field.name = item.data['id'];",
                    "",
                    "            if(item.data['value']==null || item.data['value']==''){",
                    "                field.value=item.data['reportParams__param__defaultValue'];",
                    "            }",
                    "            else{",
                    "                field.value=item.data['value'];",
                    "            }",
                    "            field.listeners=[{",
                    "                fn: function(){",
                    "                    this.setValue(null);",
                    "                },",
                    "                event: 'clearicontap'",
                    "            }];",
                    "            form.down('fieldset[itemId=dynamicFieldSet]').add(field);",
                    "",
                    "        });//end each",
                    "",
                    "        that.getBatchParamsCarousel().setActiveItem(that.getBatchParamsCarousel().down('panel[itemId=batchRouteParamsPanel]'));",
                    "",
                    "        // display Image",
                    "        var commonImageUploader= that.getBatchParamsCarousel().down('commonimageuploader');",
                    "        commonImageUploader.setDomainName('batchRoute');",
                    "        commonImageUploader.setDomainId(record.data['id']);",
                    "        commonImageUploader.showImage();",
                    "*/",
                    "    }//end callback",
                    "",
                    "});",
                    "",
                    "/*",
                    "var batchcarousel=this.getBatchReportCarousel();",
                    "var that=this;",
                    "",
                    "",
                    "Ext.Ajax.request({",
                    "    url:'/rest/batchReportDet/',",
                    "    method :'GET',",
                    "    params:{",
                    "        batchid:batchid",
                    "    },",
                    "    success:function(resp){",
                    "        var reportdata=Ext.decode(resp.responseText).batchReportDetInstanceList;",
                    "",
                    "        //console.log(batchcarousel.getInnerItems().length);",
                    "        var itemsLength=batchcarousel.getInnerItems().length;",
                    "        var itemsob=batchcarousel.getInnerItems();",
                    "        //remove",
                    "        for(j=itemsLength-1;j>0;j--){",
                    "            //console.log(batchcarousel.getInnerItems()[0]);",
                    "            //console.log(items[j]);",
                    "            batchcarousel.remove(itemsob[j]);",
                    "        }",
                    "        //console.log(batchcarousel.getInnerItems().length);",
                    "",
                    "        //add",
                    "        for(i=0;i<reportdata.length;i++){",
                    "            //console.log(reportdata[i].id);",
                    "",
                    "            var report=Ext.create('Ext.tab.Panel',{",
                    "                items:[",
                    "                {",
                    "                    xtype: 'formpanel',",
                    "                    title: reportdata[i].reportParams.report.title,",
                    "                    items: [",
                    "                    {",
                    "                        xtype: 'fieldset',",
                    "                        items: [",
                    "                        {",
                    "                            xtype: 'textfield',",
                    "                            label: 'Param_title:',",
                    "                            readOnly:true,",
                    "                            labelWidth:120,",
                    "                            value: reportdata[i].reportParams.param.title",
                    "                        },",
                    "                        {",
                    "                            xtype: 'textfield',",
                    "                            label: 'Param_type:',",
                    "                            readOnly:true,",
                    "                            labelWidth:120,",
                    "                            value: reportdata[i].reportParams.param.paramType.name",
                    "                        },",
                    "                        {",
                    "                            xtype: 'textfield',",
                    "                            label: 'Value:',",
                    "                            readOnly:true,",
                    "                            labelWidth:120,",
                    "                            value: reportdata[i].value",
                    "                        }",
                    "                        ]",
                    "                    }",
                    "                    ]",
                    "                }",
                    "                ]",
                    "            });",
                    "            batchcarousel.add([report]);",
                    "        }",
                    "        //console.log(batchcarousel.getInnerItems().length);",
                    "    }",
                    "});",
                    "*/"
                ]
            },
            "designerId": "f11fabcb-3597-4dba-bcc5-c498bca45e2a"
        }
    ]
}