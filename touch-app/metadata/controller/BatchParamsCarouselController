{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "views": [
            "BatchParamsCarousel"
        ],
        "designer|userClassName": "BatchParamsCarouselController"
    },
    "designerId": "30293a04-a602-4dba-b2f0-15b6d75b8f38",
    "cn": [
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "init",
                "designer|params": [
                    "application"
                ],
                "implHandler": [
                    "this.control({",
                    "    'batchparamscarousel searchfield[itemId=batchSearchField]':{",
                    "        action:this.loadBatchRoute",
                    "    },",
                    "    'batchparamscarousel list[itemId=batchRouteList]':{",
                    "        select:this.loadBatchRouteParams",
                    "    }",
                    "});"
                ]
            },
            "designerId": "12c6bc0c-2509-401b-a302-5cbf1518713b"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "loadBatchRoute",
                "designer|params": [
                    "field, e, eOpts"
                ],
                "implHandler": [
                    "console.log('BatchParamsCarouselController-loadBatchRoute');",
                    "this.getBatchRouteList().getStore().load({",
                    "    params:{",
                    "        'batch.id':field.getValue()",
                    "    }",
                    "});",
                    ""
                ]
            },
            "designerId": "527edd63-f821-4a5e-96bc-802b6b267ddc"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "loadBatchRouteParams",
                "designer|params": [
                    "list",
                    "record",
                    "eOpts"
                ],
                "implHandler": [
                    "console.log('BatchParamsCarouselController-loadBatchRouteParams');",
                    "",
                    "",
                    "var store=Ext.getStore('BatchRouteParamsStore');",
                    "console.log(store);",
                    "store.getData().clear();",
                    "",
                    "var that=this;",
                    "",
                    "var thatStore=store;",
                    "store.load({",
                    "    params:{",
                    "        //'batch.id':record.data['batch__id'],",
                    "        //'operation.id':record.data['operation__id']",
                    "        'batch.id':1,",
                    "        'operation.id':4",
                    "    },",
                    "    callback:function(){",
                    "",
                    "        var form=that.getBatchParamsCarousel().down('formpanel[itemId=batchRouteParamsForm]');",
                    "",
                    "        form.down('fieldset[itemId=dynamicFieldSet]').removeAll(); ",
                    "        console.log(thatStore);",
                    "",
                    "        thatStore.each(function(item, index, length){",
                    "            console.log(item);",
                    "            console.log(index);",
                    "            console.log(length);",
                    "            console.log(thatStore.getAt(index).raw);",
                    "            var field=null;",
                    "",
                    "            switch(store.getAt(i).data['reportParams__param__paramType']){",
                    "                case \"INTEGER\":",
                    "                field={",
                    "                    xtype: 'numberfield'",
                    "                };",
                    "                break;",
                    "                case \"STRING\":",
                    "                field={",
                    "                    xtype: 'textfield'",
                    "                };",
                    "                break;",
                    "                case \"BOOLEAN\":",
                    "                field={",
                    "                    xtype: 'textfield'",
                    "                };",
                    "                break;",
                    "                case \"LIST\":",
                    "                //field={",
                    "                //    xtype: 'triggerfield'",
                    "                //};",
                    "                break;",
                    "                default:",
                    "                console.log('error: not defined paramType');",
                    "                break;",
                    "",
                    "            }",
                    "            console.log(field);",
                    "            field.flex=1;",
                    "            field.fieldLabel= store.getAt(i).data['reportParams.param.title'];",
                    "            field.name = store.getAt(i).data['id'];",
                    "",
                    "            if(store.getAt(i).data['value']==null || store.getAt(i).data['value']==''){",
                    "                field.value=store.getAt(i).data['reportParams.param.defaultValue'];",
                    "            }",
                    "            else{",
                    "                field.value=store.getAt(i).data['value'];",
                    "            }",
                    "",
                    "            form.down('fieldset[itemId=dynamicFieldSet]').add(field); ",
                    "        });",
                    "",
                    "        //that.getImageUploadForm().setDomainId(record.data['id']);",
                    "        that.getBatchParamsCarousel().down('panel[itemId=batchRouteParamsPanel]');",
                    "        //that.getImageUploadForm().showImage();",
                    "    }",
                    "});"
                ]
            },
            "designerId": "f7ff9b9d-56ed-4319-8e05-c0dffe405135"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "batchSearchField",
                "selector": "batchsearchfield"
            },
            "designerId": "75a83aef-fe19-44d1-8b22-de0d44377311"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "batchRouteList",
                "selector": "batchroutelist"
            },
            "designerId": "bbe77704-210b-4958-b0b7-c65607a309ff"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "batchParamsCarousel",
                "selector": "batchparamscarousel"
            },
            "designerId": "8e13bb56-0372-4344-8e17-0a52c90d916a"
        },
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "launch",
                "implHandler": [
                    "//this.loadBatchRouteParams();//測試store問題用"
                ]
            },
            "designerId": "51d49694-e887-4a14-8a24-f5a31d3e1cc8"
        }
    ]
}