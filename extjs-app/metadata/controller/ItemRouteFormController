{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "ItemRouteFormController"
    },
    "designerId": "4d1205c0-eb29-4f3d-b055-4aeb6fa7761f",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "itemRouteCreate",
                "implHandler": [
                    "var routeform = this.getItemViewer().down('form[itemId=itemRouteForm]');",
                    "routeform.getForm().reset();",
                    "var store =this.getItemViewer().down('gridpanel[itemId=itemRouteGrid]').getStore();",
                    "var item_id = this.getItemViewer().down('form[itemId=itemForm]').down('numberfield[name=id]').getValue();",
                    "",
                    "alert(store.getCount()+1)",
                    "alert(item_id)",
                    "routeform.getForm().setValues({",
                    "    itemid: item_id,",
                    "    sequence:store.getCount()+1",
                    "});",
                    "",
                    "",
                    ""
                ]
            },
            "designerId": "a15157be-f7eb-4923-bdf4-60f17218f8a7"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "itemRouteDelete",
                "implHandler": [
                    "console.log(\"ItemEditorCtrl.doDelete\");",
                    "",
                    "var routeform = this.getItemViewer().down('form[itemId=itemRouteForm]');",
                    "routeform.submit({",
                    "    url: '/rest/itemRoute',",
                    "    submitEmptyText: false,",
                    "    waitMsg: 'Deleting Data...',",
                    "    method:'DELETE',",
                    "    success: function() {",
                    "        console.log('Deleting Success！');",
                    "        Ext.MessageBox.alert('Success','資料刪除完成');",
                    "        ",
                    "        var sm = this.getItemViewer().down('gridpanel[itemId=itemRouteGrid]').getSelectionModel();",
                    "store=this.getItemViewer().down('gridpanel[itemId=itemRouteGrid]').getStore();",
                    "store.remove(sm.getSelection());",
                    "        ",
                    "        store.reload();",
                    "        this.getItemViewer().down('form[itemId=itemRouteForm]').getForm().reset();",
                    "    },",
                    "    failure: function() {",
                    "        console.log('Deleting Failed！');",
                    "        Ext.MessageBox.alert('Failure','資料刪除失敗');",
                    "        //that.getOperationEditorct().down('button[itemId=commonDeleteBtn]').setDisabled(false);",
                    "    }",
                    "});",
                    "",
                    "",
                    "",
                    "",
                    "",
                    ""
                ]
            },
            "designerId": "40f64bd1-407f-49e0-b8d6-757966c84c24"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "itemRouteSave",
                "implHandler": [
                    "var routeform = this.getItemViewer().down('form[itemId=itemRouteForm]');",
                    "routeform.submit({",
                    "    url: '/rest/itemRoute',",
                    "    waitMsg: 'Saving Data...',",
                    "    method:'POST',",
                    "    success: function() {",
                    "        console.log('Saving Success！');",
                    "        Ext.MessageBox.alert('Success','資料更新完成');",
                    "    },",
                    "    failure: function() {",
                    "        Ext.MessageBox.alert('Failure','資料建立失敗');",
                    "    }",
                    "});",
                    ""
                ]
            },
            "designerId": "fb961088-2711-4869-a825-c33e58774c2d"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "itemRouteUpdate",
                "implHandler": [
                    ""
                ]
            },
            "designerId": "0b171913-175b-4e0d-ae8d-1f119baa3900"
        }
    ]
}