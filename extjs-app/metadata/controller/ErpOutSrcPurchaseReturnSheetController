{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "models": [
            "ErpOutSrcPurchaseReturnSheet",
            "ErpOutSrcPurchaseReturnSheetDet",
            "Supplier",
            "Warehouse",
            "WarehouseLocation",
            "ErpManufactureOrder"
        ],
        "stores": [
            "ErpOutSrcPurchaseReturnSheetStore",
            "ErpOutSrcPurchaseReturnSheetDetStore",
            "SupplierStore",
            "WarehouseStore",
            "WarehouseLocationStore",
            "ErpManufactureOrderStore"
        ],
        "views": [
            "ErpOutSrcPurchaseReturnSheetView",
            "ErpOutSrcPurchaseSheetGrid",
            "ErpOutSrcPurchaseSheetDetGrid"
        ],
        "designer|userClassName": "ErpOutSrcPurchaseReturnSheetController",
        "mixins": [
            "{",
            "    commonController: 'foodprint.controller.CommonController'",
            "}"
        ]
    },
    "designerId": "a47ecbb3-aead-49f0-abcb-684c05560050",
    "cn": [
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "mainGrid",
                "selector": "erpoutsrcpurchasereturnsheetview #grid"
            },
            "designerId": "1c23f71d-6823-43a2-b46a-0688535c44c7"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "mainForm",
                "selector": "erpoutsrcpurchasereturnsheetview #form"
            },
            "designerId": "b49ee5be-27d0-40a7-b89a-6a4f1769715f"
        },
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "init",
                "designer|params": [
                    "application"
                ],
                "implHandler": [
                    "this.control({",
                    "    'erpoutsrcpurchasereturnsheetview #index commonindextoolbar commoncreatebtn':{",
                    "        click:this.doCreateAndIndexDetail",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #index commonindextoolbar commonshowbtn':{",
                    "        click:this.doShowOutSrcPurchaseReturnSheet",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #show commonshowtoolbar commondeletebtn':{",
                    "        click:this.doDelete",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #show commonshowtoolbar commonsavebtn':{",
                    "        click:this.doSave",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #show commonshowtoolbar commoncancelbtn':{",
                    "        click:this.doCancel",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #grid':{",
                    "        select: this.enableShowBtn,",
                    "        deselect: this.disableShowBtn,",
                    "        itemdblclick: this.doShowOutSrcPurchaseReturnSheet",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #show commonindextoolbar commoncreatebtn':{",
                    "        click:this.doCreateDetail",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #show commonindextoolbar commonshowbtn':{",
                    "        click:this.doShowOutSrcPurchaseReturnSheetDet",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #showDetail commonshowtoolbar commondeletebtn':{",
                    "        click:this.doDeleteDetail",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #showDetail commonshowtoolbar commonsavebtn':{",
                    "        click:this.doSaveDetail",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #showDetail commonshowtoolbar commoncancelbtn':{",
                    "        click:this.doCancelDetail",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #show #indexDetail #detailGrid':{",
                    "        select: this.enableDetailShowBtn,",
                    "        deselect: this.disableDetailShowBtn,",
                    "        itemdblclick: this.doShowOutSrcPurchaseReturnSheetDet",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #showDetail commonselectbtn':{",
                    "        click:this.activeOurSrcPurchaseSheetDetIndex",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #showDetail #detailForm commoncancelbtn':{",
                    "        click:this.doCancelSelectOutSrcPurchaseSheetDet",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #outSrcPurchaseSheetDetIndex erpoutsrcpurchasesheetgrid':{",
                    "        select: this.doIndexDetailOutSrcPurchaseSheet",
                    "    },",
                    "    'erpoutsrcpurchasereturnsheetview #outSrcPurchaseSheetDetIndex #detailGrid':{",
                    "        itemdblclick: this.doShowOutSrcPurchaseSheetDet",
                    "    }",
                    "",
                    "});",
                    "",
                    "",
                    "this.domainName = 'foodpaint';",
                    "this.foodpaintController = 'outSrcPurchaseReturnSheet';",
                    "this.foodpaintDetController = 'outSrcPurchaseReturnSheetDet';",
                    "this.masterKey='outSrcPurchaseReturnSheet.id';"
                ]
            },
            "designerId": "80f48e9e-a237-4e43-9a31-dcbb12629c1e"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "detailGrid",
                "selector": "erpoutsrcpurchasereturnsheetview #detailGrid"
            },
            "designerId": "4d568918-1bfe-437e-be2e-be36f1882a25"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "detailForm",
                "selector": "erpoutsrcpurchasereturnsheetview #detailForm"
            },
            "designerId": "e2219b9f-f0a7-4ea8-b73e-57d2f50c4e76"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "outSrcPurchaseSheetDetGrid",
                "selector": "erpoutsrcpurchasereturnsheetview #outSrcPurchaseSheetDetIndex #detailGrid"
            },
            "designerId": "d2cea598-a714-419a-8928-3051b87c7d4d"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doSelectOutSrcPurchaseSheetDet",
                "designer|params": [
                    "obj, record, index, eOpts"
                ],
                "implHandler": [
                    "this.getDetailForm().getForm().setValues({",
                    "",
                    "    'outSrcPurchaseSheetDet.id':record.data['id'],",
                    "    'outSrcPurchaseSheetDet.typeName':record.data['typeName'],",
                    "    'outSrcPurchaseSheetDet.name':record.data['name'],",
                    "    'outSrcPurchaseSheetDet.sequence':record.data['sequence'],",
                    "    'manufactureOrder.id':record.data['manufactureOrder.id'],",
                    "    'manufactureOrder.typeName':record.data['manufactureOrder.typeName'],",
                    "    'manufactureOrder.name':record.data['manufactureOrder.name'],",
                    "    'item.id':record.data['item.id'],",
                    "    'item.name':record.data['item.name'],",
                    "    'item.title':record.data['item.title'],",
                    "    'batch.id':record.data['batch.id'],",
                    "    'batch.name':record.data['batch.name'],",
                    "    'warehouse.id':record.data['warehouse.id'],",
                    "    'warehouse.name':record.data['warehouse.name'],",
                    "    'warehouse.title':record.data['warehouse.title'],",
                    "    'warehouseLocation.id':record.data['warehouseLocation.id'],",
                    "    'warehouseLocation.title':record.data['warehouseLocation.title']",
                    "});",
                    "this.activeDetailEditor();"
                ]
            },
            "designerId": "fc0b912c-6261-4045-85ae-8f0e7373e0a9"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doShowOutSrcPurchaseSheetDet",
                "designer|params": [
                    "callback"
                ],
                "implHandler": [
                    "/*",
                    "this.doShowDetail(function(success,form,action){",
                    "});",
                    "*/",
                    "",
                    "console.log('commonController--'+this.domainName+'--doShowDetail');",
                    "",
                    "var that = this;",
                    "console.log(that);",
                    "",
                    "var record= this.getOutSrcPurchaseSheetDetGrid().getSelectionModel().getSelection()[0];",
                    "var id = -1;",
                    "",
                    "if(this.getOutSrcPurchaseSheetDetGrid().getSelectionModel().getSelection()[0])",
                    "id = record.data.id;",
                    "",
                    "",
                    "this.getDetailForm().getForm().load({",
                    "    url:this.getRoot()+'/'+this.domainName+'/show/'+id,",
                    "    params: this.getDetailParams(),",
                    "    waitMsg:Utilities.getMsg('default.message.load'),",
                    "    success: function(form, action) {",
                    "",
                    "        that.activeDetailEditor();",
                    "        that.detailActionName = 'update';",
                    "",
                    "        if (callback && callback instanceof Function) {",
                    "            callback(true,form,action);",
                    "        }",
                    "    },",
                    "",
                    "    failure: function(form, action) {",
                    "        Ext.MessageBox.alert('Failure',action.result.message);",
                    "        if (callback && callback instanceof Function){",
                    "            callback(false,form,action);",
                    "        }",
                    "    }",
                    "});",
                    ""
                ]
            },
            "designerId": "5f9dc0ed-708d-424c-8262-dfc1f7aaa8a7"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doIndexDetailOutSrcPurchaseSheet",
                "designer|params": [
                    "obj, record, index, eOpts"
                ],
                "implHandler": [
                    "var grid = this.getMainGrid().up().up().down(\"panel[itemId=outSrcPurchaseSheetDetIndex]\").down(\"grid[itemId=detailGrid]\");",
                    "console.log();",
                    "var store=grid.getStore(grid);",
                    "console.log(store);",
                    "",
                    "store.data.clear();",
                    "",
                    "var params = {};",
                    "params[\"outSrcPurchaseSheet.id\"]=record.data.id;",
                    "",
                    "store.getProxy().extraParams = params;",
                    "store.load();"
                ]
            },
            "designerId": "603d9ea8-572d-4018-a7eb-bf70b572bf9b"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doShowOutSrcPurchaseReturnSheet",
                "implHandler": [
                    "this.doShowAndIndexDetail(function(success,form,action){",
                    "",
                    "});"
                ]
            },
            "designerId": "707e2bad-5183-49ad-8bbc-5dc8607f17f7"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doShowOutSrcPurchaseReturnSheetDet",
                "implHandler": [
                    "",
                    "this.doShowDetail(function(success,form,action){",
                    "",
                    "});"
                ]
            },
            "designerId": "b7d65f65-c351-495c-bd48-5d598acbd340"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doCancelSelectOutSrcPurchaseSheetDet",
                "implHandler": [
                    "this.doCancelSelect();"
                ]
            },
            "designerId": "f7213f48-8130-4e0b-895f-68e09ae1eecd"
        }
    ]
}