{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "models": [
            "Workstation"
        ],
        "stores": [
            "WorkstationStore"
        ],
        "views": [
            "WorkstationEditor"
        ],
        "designer|userClassName": "WorkstationEditorController",
        "mixins": null
    },
    "designerId": "3108df2a-6163-414d-8730-490767127f63",
    "cn": [
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "workstationViewer",
                "selector": "workstationviewer"
            },
            "designerId": "807798d2-9ccb-4654-941d-b5ff675e0fd5"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "workstationGrid",
                "selector": "workstationgrid"
            },
            "designerId": "d71625f7-732b-48ac-ac2d-8c06f45fe06b"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "workstationEditor",
                "selector": "workstationeditor"
            },
            "designerId": "dbffe005-839d-469a-bfca-d500e42704ad"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "workstationEditorct",
                "selector": "workstationeditorct"
            },
            "designerId": "4bae169c-8fa7-4336-8891-78530415aaf3"
        },
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "init",
                "designer|params": [
                    "application"
                ],
                "implHandler": [
                    "this.control({",
                    "    'workstationeditorct button[itemId=commonCreateBtn]':{",
                    "        click:this.doCreate",
                    "    },",
                    "    'workstationeditorct button[itemId=commonDeleteBtn]':{",
                    "        click:this.doDelete",
                    "    },",
                    "    'workstationeditorct button[itemId=commonSaveBtn]':{",
                    "        click:this.doSave",
                    "    },",
                    "    'workstationeditorct button[itemId=commonReadBtn]':{",
                    "        click:this.doRead",
                    "    },",
                    "    'workstationeditorct button[itemId=commonUpdateBtn]':{",
                    "        click:this.doUpdate",
                    "    },",
                    "    'workstationeditorct grid[itemId=workstationGrid]':{",
                    "        itemdblclick:this.readWorkstation",
                    "    },",
                    "    'workstationeditorct panel[itemId=workstationEditor]':{",
                    "        tabchange:this.onTabChange",
                    "    }",
                    "});",
                    ""
                ]
            },
            "designerId": "15760532-63cc-4d7e-9c55-9c07094aca8f"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "readWorkstation",
                "designer|params": [
                    "obj, record, item, index, e, eOpts"
                ],
                "implHandler": [
                    "this.getWorkstationEditor().setActiveTab(this.getWorkstationViewer().up());",
                    "",
                    "this.getWorkstationViewer().down('form[itemId=workstationForm]').doDisplay(record);",
                    "",
                    "this.getWorkstationEditorct().down('button[itemId=commonDeleteBtn]').setDisabled(false);",
                    "this.getWorkstationEditorct().down('button[itemId=commonUpdateBtn]').setDisabled(false);",
                    "this.getWorkstationEditorct().down('button[itemId=commonReadBtn]').setDisabled(true);",
                    "this.getWorkstationEditorct().down('button[itemId=commonSaveBtn]').setDisabled(true);"
                ]
            },
            "designerId": "1c4d0586-9062-4f4b-8412-d51593ab342e"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doCreate",
                "implHandler": [
                    "console.log('workstationEditorCtrl.doCreate');",
                    "",
                    "var form=this.getWorkstationViewer().down('form[itemId=workstationForm]').getForm();",
                    "form.reset();",
                    "",
                    "this.getWorkstationEditor().setActiveTab(this.getWorkstationViewer().up());",
                    ""
                ]
            },
            "designerId": "721c6c63-1220-429e-86cf-100d5494f94d"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doDelete",
                "implHandler": [
                    "console.log(\"workstationEditorCtrl.doDelete\");",
                    "",
                    "var that=this;",
                    "",
                    "this.getWorkstationViewer().down('form[itemId=workstationForm]').submit({",
                    "    url: '/rest/workstation',",
                    "    submitEmptyText: false,",
                    "    waitMsg: 'Deleting Data...',",
                    "    method:'DELETE',",
                    "    success: function() {",
                    "        console.log('Deleting Success！');",
                    "        Ext.MessageBox.alert('Success','資料刪除完成');",
                    "        that.getWorkstationGrid().getStore().load();",
                    "        that.getWorkstationEditor().setActiveTab(that.getWorkstationGrid().up());",
                    "        that.getWorkstationViewer().down('form[itemId=workstationForm]').getForm().reset();",
                    "    },",
                    "    failure: function() {",
                    "        console.log('Deleting Failed！');",
                    "        Ext.MessageBox.alert('Failure','資料刪除失敗');",
                    "        that.getWorkstationEditorct().down('button[itemId=commonDeleteBtn]').setDisabled(false);",
                    "    }",
                    "});"
                ]
            },
            "designerId": "3ba8b6e4-79f0-485b-9e86-45c48914ab5e"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doSave",
                "implHandler": [
                    "console.log(\"workstationEditorCtrl.doSave\");",
                    "",
                    "var that=this;",
                    "this.getWorkstationViewer().down('form[itemId=workstationForm]').submit({",
                    "    url: '/rest/workstation',",
                    "    submitEmptyText: false,",
                    "    waitMsg: 'Saving Data...',",
                    "    method:'POST',",
                    "    success: function() {",
                    "        console.log('Saving Success！');",
                    "        Ext.MessageBox.alert('Success','資料建立完成');",
                    "        that.getWorkstationGrid().getStore().load();",
                    "        that.getWorkstationEditor().setActiveTab(that.getWorkstationGrid().up());",
                    "        that.getWorkstationViewer().down('form[itemId=workstationForm]').getForm().reset();",
                    "    },",
                    "    failure: function() {",
                    "        console.log('Saving Failed！');",
                    "        Ext.MessageBox.alert('Failure','資料建立失敗');",
                    "        that.getWorkstationEditorct().down('button[itemId=commonSaveBtn]').setDisabled(false);",
                    "    }",
                    "});"
                ]
            },
            "designerId": "3a9b76ca-f4a9-4370-8866-1d5f62464b47"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doUpdate",
                "implHandler": [
                    "console.log('workstationEditorCtrl.doUpdate');",
                    "",
                    "var that=this;",
                    "this.getWorkstationViewer().down('form[itemId=workstationForm]').submit({",
                    "    url: '/rest/workstation',",
                    "    submitEmptyText: false,",
                    "    waitMsg: 'Updating Data...',",
                    "    method:'PUT',",
                    "    success: function() {",
                    "        console.log('Updating Success！');",
                    "        Ext.MessageBox.alert('Success','資料更新完成');",
                    "        that.getWorkstationGrid().getStore().load();",
                    "        that.getWorkstationEditor().setActiveTab(that.getWorkstationGrid().up());",
                    "        that.getWorkstationViewer().down('form[itemId=workstationForm]').getForm().reset();",
                    "    },",
                    "    failure: function() {",
                    "        console.log('Updating Failed！');",
                    "        Ext.MessageBox.alert('Failure','資料更新失敗');",
                    "        that.getWorkstationEditorct().down('button[itemId=commonUpdateBtn]').setDisabled(false);",
                    "    }",
                    "});"
                ]
            },
            "designerId": "d2ac09e6-fbcf-4b86-a2ec-4fde6500471d"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTabChange",
                "designer|params": [
                    "tabPanel",
                    "newCard",
                    "oldCard",
                    "eOpts"
                ],
                "implHandler": [
                    "var crebtn=this.getWorkstationEditorct().down('button[itemId=commonCreateBtn]');",
                    "var delbtn=this.getWorkstationEditorct().down('button[itemId=commonDeleteBtn]');",
                    "var savbtn=this.getWorkstationEditorct().down('button[itemId=commonSaveBtn]');",
                    "var updbtn=this.getWorkstationEditorct().down('button[itemId=commonUpdateBtn]');",
                    "var redbtn=this.getWorkstationEditorct().down('button[itemId=commonReadBtn]');",
                    "",
                    "if(newCard==tabPanel.down('panel[itemId=workstationBrowse]')){",
                    "    delbtn.setDisabled(true);",
                    "    savbtn.setDisabled(true);",
                    "    updbtn.setDisabled(true);",
                    "    redbtn.setDisabled(false);",
                    "",
                    "}",
                    "if(newCard==tabPanel.down('panel[itemId=workstationMainten]')){",
                    "    redbtn.setDisabled(true);",
                    "}",
                    "else{",
                    "    tabPanel.down('form[itemId=workstationForm]').getForm().reset();",
                    "}"
                ]
            },
            "designerId": "1f607a71-39b4-4337-ad11-d97d246d8ef6"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doRead",
                "implHandler": [
                    "",
                    "console.log(\"workstationEditorCtrl.doRead\");",
                    "this.getWorkstationGrid().loadStore();"
                ]
            },
            "designerId": "d4032cdc-7bf7-48d8-84d9-c6846b85dda0"
        }
    ]
}